{% extends 'base.html' %}

{% block head %}
{% endblock %}

{% block body %}

<script>
    {% if message %}
        display_message("{{ message }}");
    {% endif %}

    function display_message(message) {
        if (message) {
            window.alert(message);
        }
    }
</script>

<div class="search-bar">
    <form method="POST" action="/search" onsubmit="return validate_form()">
        <label for="search_query">Card Search:</label>
        <input id="search_query" type="text" name="search_query" placeholder="Enter the name of the card you wish to search." class="search-input">
        <input type="submit" value="Search" class="search-button">
    </form>
</div>

<script>
function validate_form(){
    var search_query = document.getElementById("search_query").value;
    if (search_query === ""){
        return false;
    }
    return true;
}
</script>

<ul class = "search-result">
    {% for card in cards %}
        <li class = "card">
            <h2>{{ card.name + " " + card.number}}</h2>
            <form method="POST" action="/add_to_collection">
                <input type="hidden" name="name" value="{{ card.name }}">
                <input type="hidden" name="id" value="{{ card.number }}">
                <input type="hidden" name="image" value="{{ card.images.small }}">
                <button type="submit" class="add_button">Add to Collection</button>
            </form>
            <img src="{{ card.images.small }}" alt="{{ card.name }}" class="card-image">
        </li>
    {% endfor %}
</ul>
{% endblock %}